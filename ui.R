#
# This is the user-interface definition of a Shiny web application. You can
# run the application by clicking 'Run App' above.
#
# Find out more about building applications with Shiny here:
# 
#    http://shiny.rstudio.com/
#


# Define available period -------------------------------------------------

start_list <- as.character(head(sort(unique(dt$REQ_DATE)), 1))
end_list <- as.character(tail(sort(unique(dt$REQ_DATE)), 1))
model_list <- unique(sort(dt$PRODUCT_NAME))

# UI layout ---------------------------------------------------------------

shinyUI(

  dashboardPage(skin = "green",

# Header ------------------------------------------------------------------

                dashboardHeader(title = "Demand Forecast"),

# Side bar ----------------------------------------------------------------

                dashboardSidebar(
                  
                  dateRangeInput(inputId = "date_fil", label = h3("Forecast Range"), 
                              start = start_list, end = end_list, 
                              min = start_list, max = end_list), 
                  
                  pickerInput(inputId = "model_fil", label = h3("Model Selection"),
                              choices = as.list(model_list), 
                              selected = model_list,
                              options = list(`live-search` = T,
                                             `actions-box` = T),
                              multiple = T
                              ),
                  
                  selectInput(inputId = "fil_sel", label = h3("Filter criteria"),
                              choices = as.list(menu_fil$Group)), 
                  
                  box(title = "Description", height = 200, width = 12, background = "olive",
                      textOutput("desc")), 
                  
                  downloadButton("downloadData", "Download"),
                  tags$style(type='text/css', "#downloadData {margin-left: 15px;}")
                ),

# Body --------------------------------------------------------------------

                dashboardBody(
                  
                  fluidRow(
                    
                  # Value box  
                    column(width = 2,
                           valueBoxOutput(outputId = "period", width = NULL),
                           valueBoxOutput(outputId = "no_record", width = NULL),
                           valueBoxOutput(outputId = "Mean_acc", width = NULL)),
                    
                    # Histogram
                    column(width = 5,
                           box(title = "Accuracy Histogram", solidHeader = T, status = "danger", width = NULL,
                               plotOutput("his_acc", height = 300))), 

                    column(width = 5,
                           box(title = "Residuals Histogram", solidHeader = T, status = "danger", width = NULL,
                               plotOutput("his_res", height = 300)))
                  ),
                  
                  fluidRow(
                    DT::dataTableOutput("details")
                  )
                  
                )                
    
  )
  
)